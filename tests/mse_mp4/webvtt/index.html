<!DOCTYPE HTML>
<html>
<head>
  <title>WebVTT with MSE</title>
  <script>
    const manifest = 
        {
            "url":"../../../mediatest/mp4/webvtt/big-buck-bunny-subtitled-frag.mp4",
            "type":"video/mp4; codecs=\"avc1.42c01e\"",
            "init":{"offset":0,"size":1549},
            "media":[
                {"offset":1549,"size":1032192,"timestamp":0,"duration":10.416666666666666},
                {"offset":1033741,"size":169095,"timestamp":0,"duration":37.416666666666664},
                {"offset":1202836,"size":183,"timestamp":0,"duration":0.9595540364583334},
                {"offset":1203019,"size":136199,"timestamp":10.416666666666666,"duration":1.4583333333333333},
                {"offset":1339218,"size":23413,"timestamp":37.416666666666664,"duration":5.166666666666667},
                {"offset":1362631,"size":170,"timestamp":0.9595540364583334,"duration":0.17635091145833334},
                {"offset":1362801,"size":375496,"timestamp":11.875,"duration":3.875},
                {"offset":1738297,"size":62973,"timestamp":42.583333333333336,"duration":13.916666666666666},
                {"offset":1801270,"size":124,"timestamp":1.1359049479166667,"duration":0.1796875},
                {"offset":1801394,"size":368316,"timestamp":15.75,"duration":7.291666666666667},
                {"offset":2169710,"size":118163,"timestamp":56.5,"duration":26.166666666666668},
                {"offset":2287873,"size":415,"timestamp":1.3155924479166667,"duration":0.5629069010416666},
                {"offset":2288288,"size":1117451,"timestamp":23.041666666666668,"duration":10.416666666666666},
                {"offset":3405739,"size":168953,"timestamp":82.66666666666667,"duration":37.416666666666664},
                {"offset":3574692,"size":283,"timestamp":1.8784993489583333,"duration":0.8917643229166666},
                {"offset":3574975,"size":944689,"timestamp":33.458333333333336,"duration":10.416666666666666},
                {"offset":4519664,"size":168887,"timestamp":120.08333333333333,"duration":37.416666666666664},
                {"offset":4688551,"size":184,"timestamp":2.770263671875,"duration":0.9189453125},
                {"offset":4688735,"size":336609,"timestamp":43.875,"duration":3.8333333333333335},
                {"offset":5025344,"size":62220,"timestamp":157.5,"duration":13.75},
                {"offset":5087564,"size":196,"timestamp":3.689208984375,"duration":0.206787109375},
                {"offset":5087760,"size":887128,"timestamp":47.708333333333336,"duration":8.375},
                {"offset":5974888,"size":135550,"timestamp":171.25,"duration":30},
                {"offset":6110438,"size":236,"timestamp":3.89599609375,"duration":0.461181640625},
                {"offset":6110674,"size":139025,"timestamp":56.083333333333336,"duration":4.583333333333333},
                {"offset":6249699,"size":74535,"timestamp":201.25,"duration":16.5},
                {"offset":6324234,"size":124,"timestamp":4.357177734375,"duration":1.2105305989583333},
                {"offset":6324358,"size":181479,"timestamp":60.666666666666664,"duration":3.125},
                {"offset":6505837,"size":50520,"timestamp":217.75,"duration":11.166666666666666},
                {"offset":6556357,"size":163,"timestamp":5.567708333333333,"duration":0.12548828125},
                {"offset":6556520,"size":597693,"timestamp":63.791666666666664,"duration":5.625},
                {"offset":7154213,"size":91544,"timestamp":228.91666666666666,"duration":20.25},
                {"offset":7245757,"size":124,"timestamp":5.693196614583333,"duration":0.2881673177083333},
                {"offset":7245881,"size":78617,"timestamp":69.41666666666667,"duration":1.875},
                {"offset":7324498,"size":30176,"timestamp":249.16666666666666,"duration":6.666666666666667},
                {"offset":7354674,"size":163,"timestamp":5.981363932291667,"duration":0.13566080729166666},
                {"offset":7354837,"size":131584,"timestamp":71.29166666666667,"duration":2.1666666666666665},
                {"offset":7486421,"size":35460,"timestamp":255.83333333333334,"duration":7.833333333333333},
                {"offset":7521881,"size":155,"timestamp":6.117024739583333,"duration":0.10172526041666667},
                {"offset":7522036,"size":219647,"timestamp":73.45833333333333,"duration":2.0833333333333335},
                {"offset":7741683,"size":33569,"timestamp":263.6666666666667,"duration":7.416666666666667},
                {"offset":7775252,"size":124,"timestamp":6.21875,"duration":0.5865885416666666},
                {"offset":7775376,"size":522077,"timestamp":75.54166666666667,"duration":4.416666666666667},
                {"offset":8297453,"size":71928,"timestamp":271.0833333333333,"duration":15.916666666666666},
                {"offset":8369381,"size":155,"timestamp":6.805338541666667,"duration":0.11189778645833333},
                {"offset":8369536,"size":534546,"timestamp":79.95833333333333,"duration":9.791666666666666},
                {"offset":8904082,"size":158401,"timestamp":287,"duration":35.083333333333336},
                {"offset":9062483,"size":124,"timestamp":6.917236328125,"duration":0.4103190104166667},
                {"offset":9062607,"size":149045,"timestamp":89.75,"duration":1.6666666666666667},
                {"offset":9211652,"size":27229,"timestamp":322.0833333333333,"duration":6},
                {"offset":9238881,"size":169,"timestamp":7.327555338541667,"duration":0.08479817708333333},
                {"offset":9239050,"size":324032,"timestamp":91.41666666666667,"duration":8.333333333333334},
                {"offset":9563082,"size":135088,"timestamp":328.0833333333333,"duration":29.916666666666668},
                {"offset":9698170,"size":186,"timestamp":7.412353515625,"duration":0.885009765625},
                {"offset":9698356,"size":323376,"timestamp":99.75,"duration":4.166666666666667},
                {"offset":10021732,"size":67409,"timestamp":358,"duration":14.916666666666666},
                {"offset":10089141,"size":157,"timestamp":8.29736328125,"duration":0.084716796875},
                {"offset":10089298,"size":621586,"timestamp":103.91666666666667,"duration":8.75},
                {"offset":10710884,"size":141893,"timestamp":372.9166666666667,"duration":31.416666666666668},
                {"offset":10852777,"size":172,"timestamp":8.382080078125,"duration":0.373046875},
                {"offset":10852949,"size":509355,"timestamp":112.66666666666667,"duration":5.291666666666667},
                {"offset":11362304,"size":85869,"timestamp":404.3333333333333,"duration":19},
                {"offset":11448173,"size":124,"timestamp":8.755126953125,"duration":1.8954264322916667},
                {"offset":11448297,"size":393517,"timestamp":117.95833333333333,"duration":2.9166666666666665},
                {"offset":11841814,"size":47462,"timestamp":423.3333333333333,"duration":10.5},
                {"offset":11889276,"size":161,"timestamp":10.650553385416666,"duration":0.08479817708333333},
                {"offset":11889437,"size":233245,"timestamp":120.875,"duration":2.5833333333333335},
                {"offset":12122682,"size":41873,"timestamp":433.8333333333333,"duration":9.25},
                {"offset":12164555,"size":124,"timestamp":10.7353515625,"duration":0.094970703125},
                {"offset":12164679,"size":233412,"timestamp":123.45833333333333,"duration":3.4166666666666665},
                {"offset":12398091,"size":55426,"timestamp":443.0833333333333,"duration":12.25},
                {"offset":12453517,"size":159,"timestamp":10.830322265625,"duration":0.09488932291666667},
                {"offset":12453676,"size":982456,"timestamp":126.875,"duration":10.416666666666666},
                {"offset":13436132,"size":168932,"timestamp":455.3333333333333,"duration":37.416666666666664},
                {"offset":13605064,"size":124,"timestamp":10.925211588541666,"duration":0.42724609375},
                {"offset":13605188,"size":892905,"timestamp":137.29166666666666,"duration":9.083333333333334},
                {"offset":14498093,"size":147194,"timestamp":492.75,"duration":32.583333333333336},
                {"offset":14645287,"size":212,"timestamp":11.352457682291666,"duration":0.7901204427083334},
                {"offset":14645499,"size":185188,"timestamp":146.375,"duration":2.7083333333333335},
                {"offset":14830687,"size":43758,"timestamp":525.3333333333334,"duration":9.666666666666666},
                {"offset":14874445,"size":157,"timestamp":12.142578125,"duration":0.23396809895833334},
                {"offset":14874602,"size":704033,"timestamp":149.08333333333334,"duration":6.916666666666667},
                {"offset":15578635,"size":112087,"timestamp":535,"duration":24.833333333333332},
                {"offset":15690722,"size":225,"timestamp":12.376546223958334,"duration":0.21695963541666666},
                {"offset":15690947,"size":228175,"timestamp":156,"duration":4.833333333333333},
                {"offset":15919122,"size":78724,"timestamp":559.8333333333334,"duration":17.416666666666668},
                {"offset":15997846,"size":181,"timestamp":12.593505859375,"duration":0.5086263020833334},
                {"offset":15998027,"size":195819,"timestamp":160.83333333333334,"duration":1.4583333333333333},
                {"offset":16193846,"size":23453,"timestamp":577.25,"duration":5.166666666666667},
                {"offset":16217299,"size":162,"timestamp":13.102132161458334,"duration":0.13907877604166666},
                {"offset":16217461,"size":80260,"timestamp":162.29166666666666,"duration":1},
                {"offset":16297721,"size":16261,"timestamp":582.4166666666666,"duration":3.5833333333333335},
                {"offset":16313982,"size":124,"timestamp":13.2412109375,"duration":0.11865234375},
                {"offset":16314106,"size":301151,"timestamp":163.29166666666666,"duration":2.9166666666666665},
                {"offset":16615257,"size":47558,"timestamp":586,"duration":10.5},
                {"offset":16662815,"size":166,"timestamp":13.35986328125,"duration":0.08138020833333333},
                {"offset":16662981,"size":78816,"timestamp":166.20833333333334,"duration":1.7916666666666667},
                {"offset":16741797,"size":29051,"timestamp":596.5,"duration":6.416666666666667},
                {"offset":16770848,"size":124,"timestamp":13.441243489583334,"duration":0.3424479166666667},
                {"offset":16770972,"size":204108,"timestamp":168,"duration":1.5416666666666667},
                {"offset":16975080,"size":25349,"timestamp":602.9166666666666,"duration":5.583333333333333},
                {"offset":17000429,"size":156,"timestamp":13.78369140625,"duration":0.12548828125},
                {"offset":17000585,"size":355274,"timestamp":169.54166666666666,"duration":6.583333333333333},
                {"offset":17355859,"size":106527,"timestamp":608.5,"duration":23.583333333333332},
                {"offset":17462386,"size":169,"timestamp":13.9091796875,"duration":0.423828125},
                {"offset":17462555,"size":240221,"timestamp":176.125,"duration":1.625},
                {"offset":17702776,"size":26484,"timestamp":632.0833333333334,"duration":5.833333333333333},
                {"offset":17729260,"size":158,"timestamp":14.3330078125,"duration":0.159423828125},
                {"offset":17729418,"size":185579,"timestamp":177.75,"duration":2.75},
                {"offset":17914997,"size":44532,"timestamp":637.9166666666666,"duration":9.833333333333334},
                {"offset":17959529,"size":157,"timestamp":14.492431640625,"duration":0.20345052083333334},
                {"offset":17959686,"size":563296,"timestamp":180.5,"duration":5.458333333333333},
                {"offset":18522982,"size":88823,"timestamp":647.75,"duration":19.666666666666668},
                {"offset":18611805,"size":170,"timestamp":14.695882161458334,"duration":0.48486328125},
                {"offset":18611975,"size":361668,"timestamp":185.95833333333334,"duration":3.375},
                {"offset":18973643,"size":54687,"timestamp":667.4166666666666,"duration":12.083333333333334},
                {"offset":19028330,"size":160,"timestamp":15.180745442708334,"duration":0.20686848958333334},
                {"offset":19028490,"size":83672,"timestamp":189.33333333333334,"duration":2.8333333333333335},
                {"offset":19112162,"size":45981,"timestamp":679.5,"duration":10.166666666666666},
                {"offset":19158143,"size":124,"timestamp":15.387613932291666,"duration":0.54931640625},
                {"offset":19158267,"size":312927,"timestamp":192.16666666666666,"duration":2.5},
                {"offset":19471194,"size":40677,"timestamp":689.6666666666666,"duration":9},
                {"offset":19511871,"size":160,"timestamp":15.936930338541666,"duration":0.08138020833333333},
                {"offset":19512031,"size":97758,"timestamp":194.66666666666666,"duration":1.0416666666666667},
                {"offset":19609789,"size":16661,"timestamp":698.6666666666666,"duration":3.6666666666666665},
                {"offset":19626450,"size":124,"timestamp":16.018310546875,"duration":0.020345052083333332},
                {"offset":19626574,"size":161071,"timestamp":195.70833333333334,"duration":1.2083333333333333},
                {"offset":19787645,"size":19701,"timestamp":702.3333333333334,"duration":4.333333333333333},
                {"offset":19807346,"size":158,"timestamp":16.038655598958332,"duration":0.18986002604166666},
                {"offset":19807504,"size":169152,"timestamp":196.91666666666666,"duration":2.9166666666666665},
                {"offset":19976656,"size":47434,"timestamp":706.6666666666666,"duration":10.5},
                {"offset":20024090,"size":124,"timestamp":16.228515625,"duration":0.2679036458333333},
                {"offset":20024214,"size":387524,"timestamp":199.83333333333334,"duration":4.333333333333333},
                {"offset":20411738,"size":70481,"timestamp":717.1666666666666,"duration":15.583333333333334},
                {"offset":20482219,"size":158,"timestamp":16.496419270833332,"duration":0.1220703125},
                {"offset":20482377,"size":81407,"timestamp":204.16666666666666,"duration":1.75},
                {"offset":20563784,"size":28343,"timestamp":732.75,"duration":6.25},
                {"offset":20592127,"size":167,"timestamp":16.618489583333332,"duration":0.15934244791666666},
                {"offset":20592294,"size":202037,"timestamp":205.91666666666666,"duration":1.5416666666666667},
                {"offset":20794331,"size":24940,"timestamp":739,"duration":5.5},
                {"offset":20819271,"size":124,"timestamp":16.77783203125,"duration":0.24072265625},
                {"offset":20819395,"size":102844,"timestamp":207.45833333333334,"duration":1.4166666666666667},
                {"offset":20922239,"size":23027,"timestamp":744.5,"duration":5.083333333333333},
                {"offset":20945266,"size":154,"timestamp":17.0185546875,"duration":0.091552734375},
                {"offset":20945420,"size":329802,"timestamp":208.875,"duration":2.75},
                {"offset":21275222,"size":44860,"timestamp":749.5833333333334,"duration":9.916666666666666},
                {"offset":21320082,"size":124,"timestamp":17.110107421875,"duration":0.3187662760416667},
                {"offset":21320206,"size":239254,"timestamp":211.625,"duration":2.1666666666666665},
                {"offset":21559460,"size":35108,"timestamp":759.5,"duration":7.75},
                {"offset":21594568,"size":148,"timestamp":17.428873697916668,"duration":0.08138020833333333},
                {"offset":21594716,"size":604191,"timestamp":213.79166666666666,"duration":6.708333333333333},
                {"offset":22198907,"size":108790,"timestamp":767.25,"duration":24.083333333333332},
                {"offset":22307697,"size":172,"timestamp":17.51025390625,"duration":0.457763671875},
                {"offset":22307869,"size":132764,"timestamp":220.5,"duration":3.2916666666666665},
                {"offset":22440633,"size":53499,"timestamp":791.3333333333334,"duration":11.833333333333334},
                {"offset":22494132,"size":124,"timestamp":17.968017578125,"duration":0.3797200520833333},
                {"offset":22494256,"size":270138,"timestamp":223.79166666666666,"duration":2.4583333333333335},
                {"offset":22764394,"size":39968,"timestamp":803.1666666666666,"duration":8.833333333333334},
                {"offset":22804362,"size":158,"timestamp":18.347737630208332,"duration":0.08138020833333333},
                {"offset":22804520,"size":377936,"timestamp":226.25,"duration":3.6666666666666665},
                {"offset":23182456,"size":59506,"timestamp":812,"duration":13.166666666666666},
                {"offset":23241962,"size":168,"timestamp":18.429117838541668,"duration":0.10172526041666667},
                {"offset":23242130,"size":144566,"timestamp":229.91666666666666,"duration":2.5416666666666665},
                {"offset":23386696,"size":41115,"timestamp":825.1666666666666,"duration":9.083333333333334},
                {"offset":23427811,"size":124,"timestamp":18.530843098958332,"duration":2.1870930989583335},
                {"offset":23427935,"size":739085,"timestamp":232.45833333333334,"duration":9.583333333333334},
                {"offset":24167020,"size":155405,"timestamp":834.25,"duration":34.416666666666664},
                {"offset":24322425,"size":162,"timestamp":20.717936197916668,"duration":0.3255208333333333},
                {"offset":24322587,"size":184887,"timestamp":242.04166666666666,"duration":1.4583333333333333},
                {"offset":24507474,"size":23834,"timestamp":868.6666666666666,"duration":5.25},
                {"offset":24531308,"size":124,"timestamp":21.04345703125,"duration":0.946044921875},
                {"offset":24531432,"size":714167,"timestamp":243.5,"duration":7.25},
                {"offset":25245599,"size":117446,"timestamp":873.9166666666666,"duration":26},
                {"offset":25363045,"size":156,"timestamp":21.989501953125,"duration":0.3323567708333333},
                {"offset":25363201,"size":84198,"timestamp":250.75,"duration":1.25},
                {"offset":25447399,"size":20403,"timestamp":899.9166666666666,"duration":4.5},
                {"offset":25467802,"size":124,"timestamp":22.321858723958332,"duration":0.18644205729166666},
                {"offset":25467926,"size":204749,"timestamp":252,"duration":1.6666666666666667},
                {"offset":25672675,"size":27190,"timestamp":904.4166666666666,"duration":6},
                {"offset":25699865,"size":158,"timestamp":22.50830078125,"duration":0.3323567708333333},
                {"offset":25700023,"size":165572,"timestamp":253.66666666666666,"duration":1.6666666666666667},
                {"offset":25865595,"size":26839,"timestamp":910.4166666666666,"duration":5.916666666666667},
                {"offset":25892434,"size":124,"timestamp":22.840657552083332,"duration":0.3797200520833333},
                {"offset":25892558,"size":83011,"timestamp":255.33333333333334,"duration":1.6666666666666667},
                {"offset":25975569,"size":27188,"timestamp":916.3333333333334,"duration":6},
                {"offset":26002757,"size":161,"timestamp":23.220377604166668,"duration":0.3323567708333333},
                {"offset":26002918,"size":190539,"timestamp":257,"duration":1.6666666666666667},
                {"offset":26193457,"size":27192,"timestamp":922.3333333333334,"duration":6},
                {"offset":26220649,"size":124,"timestamp":23.552734375,"duration":0.4170735677083333},
                {"offset":26220773,"size":310935,"timestamp":258.6666666666667,"duration":2.5},
                {"offset":26531708,"size":40733,"timestamp":928.3333333333334,"duration":9},
                {"offset":26572441,"size":160,"timestamp":23.969807942708332,"duration":0.206787109375},
                {"offset":26572601,"size":111443,"timestamp":261.1666666666667,"duration":1.6666666666666667},
                {"offset":26684044,"size":26778,"timestamp":937.3333333333334,"duration":5.916666666666667},
                {"offset":26710822,"size":124,"timestamp":24.176595052083332,"duration":0.4170735677083333},
                {"offset":26710946,"size":169177,"timestamp":262.8333333333333,"duration":1.6666666666666667},
                {"offset":26880123,"size":27191,"timestamp":943.25,"duration":6},
                {"offset":26907314,"size":158,"timestamp":24.593668619791668,"duration":0.22379557291666666},
                {"offset":26907472,"size":155275,"timestamp":264.5,"duration":1.6666666666666667},
                {"offset":27062747,"size":27223,"timestamp":949.25,"duration":6},
                {"offset":27089970,"size":124,"timestamp":24.817464192708332,"duration":1.3360188802083333},
                {"offset":27090094,"size":406899,"timestamp":266.1666666666667,"duration":4.166666666666667},
                {"offset":27496993,"size":67436,"timestamp":955.25,"duration":14.916666666666666},
                {"offset":27564429,"size":160,"timestamp":26.153483072916668,"duration":0.06778971354166667},
                {"offset":27564589,"size":535089,"timestamp":270.3333333333333,"duration":5.625},
                {"offset":28099678,"size":91508,"timestamp":970.1666666666666,"duration":20.25},
                {"offset":28191186,"size":166,"timestamp":26.221272786458332,"duration":0.10172526041666667},
                {"offset":28191352,"size":184823,"timestamp":275.9583333333333,"duration":1.9583333333333333},
                {"offset":28376175,"size":31705,"timestamp":990.4166666666666,"duration":7},
                {"offset":28407880,"size":124,"timestamp":26.322998046875,"duration":0.16617838541666666},
                {"offset":28408004,"size":222230,"timestamp":277.9166666666667,"duration":1.7916666666666667},
                {"offset":28630234,"size":29044,"timestamp":997.4166666666666,"duration":6.416666666666667},
                {"offset":28659278,"size":162,"timestamp":26.489176432291668,"duration":0.23738606770833334},
                {"offset":28659440,"size":156908,"timestamp":279.7083333333333,"duration":1.6666666666666667},
                {"offset":28816348,"size":27232,"timestamp":1003.8333333333334,"duration":6},
                {"offset":28843580,"size":124,"timestamp":26.7265625,"duration":0.09830729166666667},
                {"offset":28843704,"size":293043,"timestamp":281.375,"duration":3.3333333333333335},
                {"offset":29136747,"size":53875,"timestamp":1009.8333333333334,"duration":11.916666666666666},
                {"offset":29190622,"size":167,"timestamp":26.824869791666668,"duration":0.09830729166666667},
                {"offset":29190789,"size":331328,"timestamp":284.7083333333333,"duration":7.5},
                {"offset":29522117,"size":121591,"timestamp":1021.75,"duration":26.916666666666668},
                {"offset":29643708,"size":124,"timestamp":26.923177083333332,"duration":0.14583333333333334},
                {"offset":29643832,"size":406781,"timestamp":292.2083333333333,"duration":3.3333333333333335},
                {"offset":30050613,"size":54220,"timestamp":1048.6666666666667,"duration":12},
                {"offset":30104833,"size":155,"timestamp":27.069010416666668,"duration":0.20003255208333334},
                {"offset":30104988,"size":85549,"timestamp":295.5416666666667,"duration":1.5833333333333333},
                {"offset":30190537,"size":25713,"timestamp":1060.6666666666667,"duration":5.666666666666667},
                {"offset":30216250,"size":124,"timestamp":27.26904296875,"duration":0.16617838541666666},
                {"offset":30216374,"size":271071,"timestamp":297.125,"duration":3.125},
                {"offset":30487445,"size":50831,"timestamp":1066.3333333333333,"duration":11.25},
                {"offset":30538276,"size":175,"timestamp":27.435221354166668,"duration":0.11189778645833333},
                {"offset":30538451,"size":443076,"timestamp":300.25,"duration":4.958333333333333},
                {"offset":30981527,"size":80278,"timestamp":1077.5833333333333,"duration":17.75},
                {"offset":31061805,"size":148,"timestamp":27.547119140625,"duration":0.11531575520833333},
                {"offset":31061953,"size":298111,"timestamp":305.2083333333333,"duration":3.0833333333333335},
                {"offset":31360064,"size":50123,"timestamp":1095.3333333333333,"duration":11.083333333333334},
                {"offset":31410187,"size":124,"timestamp":27.662434895833332,"duration":0.13557942708333334},
                {"offset":31410311,"size":367175,"timestamp":308.2916666666667,"duration":4.208333333333333},
                {"offset":31777486,"size":68167,"timestamp":1106.4166666666667,"duration":15.083333333333334},
                {"offset":31845653,"size":156,"timestamp":27.798014322916668,"duration":0.07804361979166667},
                {"offset":31845809,"size":293459,"timestamp":312.5,"duration":1.9166666666666667},
                {"offset":32139268,"size":31273,"timestamp":1121.5,"duration":6.916666666666667},
                {"offset":32170541,"size":124,"timestamp":27.876057942708332,"duration":0.3119303385416667},
                {"offset":32170665,"size":201160,"timestamp":314.4166666666667,"duration":2.7916666666666665},
                {"offset":32371825,"size":45290,"timestamp":1128.4166666666667,"duration":10},
                {"offset":32417115,"size":156,"timestamp":28.18798828125,"duration":0.08138020833333333},
                {"offset":32417271,"size":249110,"timestamp":317.2083333333333,"duration":2},
                {"offset":32666381,"size":32430,"timestamp":1138.4166666666667,"duration":7.166666666666667},
                {"offset":32698811,"size":124,"timestamp":28.269368489583332,"duration":0.3221028645833333},
                {"offset":32698935,"size":290983,"timestamp":319.2083333333333,"duration":2.9583333333333335},
                {"offset":32989918,"size":48242,"timestamp":1145.5833333333333,"duration":10.666666666666666},
                {"offset":33038160,"size":156,"timestamp":28.591471354166668,"duration":0.08138020833333333},
                {"offset":33038316,"size":62393,"timestamp":322.1666666666667,"duration":1.5416666666666667},
                {"offset":33100709,"size":24950,"timestamp":1156.25,"duration":5.5},
                {"offset":33125659,"size":124,"timestamp":28.6728515625,"duration":0.08138020833333333},
                {"offset":33125783,"size":1038446,"timestamp":323.7083333333333,"duration":10.416666666666666},
                {"offset":34164229,"size":169031,"timestamp":1161.75,"duration":37.416666666666664},
                {"offset":34333260,"size":153,"timestamp":28.754231770833332,"duration":0.08138020833333333},
                {"offset":34333413,"size":293154,"timestamp":334.125,"duration":2.75},
                {"offset":34626567,"size":44582,"timestamp":1199.1666666666667,"duration":9.833333333333334},
                {"offset":34671149,"size":124,"timestamp":28.835611979166668,"duration":0.5323893229166666},
                {"offset":34671273,"size":136184,"timestamp":336.875,"duration":2.875},
                {"offset":34807457,"size":46712,"timestamp":1209,"duration":10.333333333333334},
                {"offset":34854169,"size":160,"timestamp":29.368001302083332,"duration":0.08138020833333333},
                {"offset":34854329,"size":1086217,"timestamp":339.75,"duration":10.416666666666666},
                {"offset":35940546,"size":168641,"timestamp":1219.3333333333333,"duration":37.333333333333336},
                {"offset":36109187,"size":124,"timestamp":29.449381510416668,"duration":0.820556640625},
                {"offset":36109311,"size":452637,"timestamp":350.1666666666667,"duration":5.208333333333333},
                {"offset":36561948,"size":84818,"timestamp":1256.6666666666667,"duration":18.75},
                {"offset":36646766,"size":154,"timestamp":30.269938151041668,"duration":0.07462565104166667},
                {"offset":36646920,"size":1073927,"timestamp":355.375,"duration":10.416666666666666},
                {"offset":37720847,"size":168517,"timestamp":1275.4166666666667,"duration":37.333333333333336},
                {"offset":37889364,"size":160,"timestamp":30.344563802083332,"duration":0.24072265625},
                {"offset":37889524,"size":437587,"timestamp":365.7916666666667,"duration":5.333333333333333},
                {"offset":38327111,"size":86571,"timestamp":1312.75,"duration":19.166666666666668},
                {"offset":38413682,"size":124,"timestamp":30.585286458333332,"duration":1.03759765625},
                {"offset":38413806,"size":221717,"timestamp":371.125,"duration":1.5833333333333333},
                {"offset":38635523,"size":25728,"timestamp":1331.9166666666667,"duration":5.666666666666667},
                {"offset":38661251,"size":148,"timestamp":31.622884114583332,"duration":0.07462565104166667},
                {"offset":38661399,"size":142841,"timestamp":372.7083333333333,"duration":2.6666666666666665},
                {"offset":38804240,"size":43388,"timestamp":1337.5833333333333,"duration":9.583333333333334},
                {"offset":38847628,"size":124,"timestamp":31.697509765625,"duration":0.7391764322916666},
                {"offset":38847752,"size":241598,"timestamp":375.375,"duration":2.9583333333333335},
                {"offset":39089350,"size":47842,"timestamp":1347.1666666666667,"duration":10.583333333333334},
                {"offset":39137192,"size":153,"timestamp":32.436686197916664,"duration":0.14241536458333334},
                {"offset":39137345,"size":288393,"timestamp":378.3333333333333,"duration":2.8333333333333335},
                {"offset":39425738,"size":45971,"timestamp":1357.75,"duration":10.166666666666666},
                {"offset":39471709,"size":124,"timestamp":32.5791015625,"duration":0.8511555989583334},
                {"offset":39471833,"size":446564,"timestamp":381.1666666666667,"duration":9.625},
                {"offset":39918397,"size":156194,"timestamp":1367.9166666666667,"duration":34.583333333333336},
                {"offset":40074591,"size":154,"timestamp":33.430257161458336,"duration":0.07454427083333333},
                {"offset":40074745,"size":153113,"timestamp":390.7916666666667,"duration":1.7083333333333333},
                {"offset":40227858,"size":27965,"timestamp":1402.5,"duration":6.166666666666667},
                {"offset":40255823,"size":124,"timestamp":33.504801432291664,"duration":0.5662434895833334},
                {"offset":40255947,"size":169270,"timestamp":392.5,"duration":2},
                {"offset":40425217,"size":32401,"timestamp":1408.6666666666667,"duration":7.166666666666667},
                {"offset":40457618,"size":155,"timestamp":34.071044921875,"duration":0.07462565104166667},
                {"offset":40457773,"size":92750,"timestamp":394.5,"duration":1.625},
                {"offset":40550523,"size":26467,"timestamp":1415.8333333333333,"duration":5.833333333333333},
                {"offset":40576990,"size":166,"timestamp":34.145670572916664,"duration":0.10847981770833333},
                {"offset":40577156,"size":187758,"timestamp":396.125,"duration":2.8333333333333335},
                {"offset":40764914,"size":45971,"timestamp":1421.6666666666667,"duration":10.166666666666666},
                {"offset":40810885,"size":124,"timestamp":34.254150390625,"duration":0.07804361979166667},
                {"offset":40811009,"size":544120,"timestamp":398.9583333333333,"duration":5.375},
                {"offset":41355129,"size":87058,"timestamp":1431.8333333333333,"duration":19.25},
                {"offset":41442187,"size":158,"timestamp":34.332194010416664,"duration":0.17293294270833334},
                {"offset":41442345,"size":293487,"timestamp":404.3333333333333,"duration":3.7916666666666665},
                {"offset":41735832,"size":61404,"timestamp":1451.0833333333333,"duration":13.583333333333334},
                {"offset":41797236,"size":124,"timestamp":34.505126953125,"duration":0.5628255208333334},
                {"offset":41797360,"size":209341,"timestamp":408.125,"duration":2.2916666666666665},
                {"offset":42006701,"size":37320,"timestamp":1464.6666666666667,"duration":8.25},
                {"offset":42044021,"size":158,"timestamp":35.067952473958336,"duration":0.17293294270833334},
                {"offset":42044179,"size":252926,"timestamp":410.4166666666667,"duration":1.7083333333333333},
                {"offset":42297105,"size":28014,"timestamp":1472.9166666666667,"duration":6.166666666666667},
                {"offset":42325119,"size":124,"timestamp":35.240885416666664,"duration":0.2644856770833333},
                {"offset":42325243,"size":371348,"timestamp":412.125,"duration":4},
                {"offset":42696591,"size":64783,"timestamp":1479.0833333333333,"duration":14.333333333333334},
                {"offset":42761374,"size":157,"timestamp":35.50537109375,"duration":0.057698567708333336},
                {"offset":42761531,"size":125555,"timestamp":416.125,"duration":1.2083333333333333},
                {"offset":42887086,"size":19668,"timestamp":1493.4166666666667,"duration":4.333333333333333},
                {"offset":42906754,"size":124,"timestamp":35.563069661458336,"duration":0.07796223958333333},
                {"offset":42906878,"size":205234,"timestamp":417.3333333333333,"duration":2.7083333333333335},
                {"offset":43112112,"size":44089,"timestamp":1497.75,"duration":9.75},
                {"offset":43156201,"size":158,"timestamp":35.641031901041664,"duration":0.11865234375},
                {"offset":43156359,"size":231571,"timestamp":420.0416666666667,"duration":1.8333333333333333},
                {"offset":43387930,"size":29870,"timestamp":1507.5,"duration":6.583333333333333},
                {"offset":43417800,"size":124,"timestamp":35.759684244791664,"duration":0.20686848958333334},
                {"offset":43417924,"size":263603,"timestamp":421.875,"duration":2.4583333333333335},
                {"offset":43681527,"size":39987,"timestamp":1514.0833333333333,"duration":8.833333333333334},
                {"offset":43721514,"size":160,"timestamp":35.966552734375,"duration":0.088134765625},
                {"offset":43721674,"size":104024,"timestamp":424.3333333333333,"duration":2.0833333333333335},
                {"offset":43825698,"size":33592,"timestamp":1522.9166666666667,"duration":7.416666666666667},
                {"offset":43859290,"size":124,"timestamp":36.0546875,"duration":0.2509765625},
                {"offset":43859414,"size":209561,"timestamp":426.4166666666667,"duration":1.0833333333333333},
                {"offset":44068975,"size":17803,"timestamp":1530.3333333333333,"duration":3.9166666666666665},
                {"offset":44086778,"size":159,"timestamp":36.3056640625,"duration":0.17293294270833334},
                {"offset":44086937,"size":96558,"timestamp":427.5,"duration":1.7916666666666667},
                {"offset":44183495,"size":29092,"timestamp":1534.25,"duration":6.416666666666667},
                {"offset":44212587,"size":124,"timestamp":36.478597005208336,"duration":0.6917317708333334},
                {"offset":44212711,"size":119695,"timestamp":429.2916666666667,"duration":1.5},
                {"offset":44332406,"size":24527,"timestamp":1540.6666666666667,"duration":5.416666666666667},
                {"offset":44356933,"size":168,"timestamp":37.170328776041664,"duration":0.13899739583333334},
                {"offset":44357101,"size":391427,"timestamp":430.7916666666667,"duration":2.9166666666666665},
                {"offset":44748528,"size":47085,"timestamp":1546.0833333333333,"duration":10.416666666666666},
                {"offset":44795613,"size":124,"timestamp":37.309326171875,"duration":0.3899739583333333},
                {"offset":44795737,"size":102955,"timestamp":433.7083333333333,"duration":1.8333333333333333},
                {"offset":44898692,"size":29840,"timestamp":1556.5,"duration":6.583333333333333},
                {"offset":44928532,"size":156,"timestamp":37.699300130208336,"duration":0.3763834635416667},
                {"offset":44928688,"size":463029,"timestamp":435.5416666666667,"duration":5.041666666666667},
                {"offset":45391717,"size":81697,"timestamp":1563.0833333333333,"duration":18.083333333333332},
                {"offset":45473414,"size":124,"timestamp":38.07568359375,"duration":1.0477701822916667},
                {"offset":45473538,"size":92727,"timestamp":440.5833333333333,"duration":1.5833333333333333},
                {"offset":45566265,"size":26090,"timestamp":1581.1666666666667,"duration":5.75},
                {"offset":45592355,"size":154,"timestamp":39.123453776041664,"duration":0.22379557291666666},
                {"offset":45592509,"size":189079,"timestamp":442.1666666666667,"duration":1.0416666666666667},
                {"offset":45781588,"size":16622,"timestamp":1586.9166666666667,"duration":3.6666666666666665},
                {"offset":45798210,"size":124,"timestamp":39.347249348958336,"duration":0.5323079427083334},
                {"offset":45798334,"size":155815,"timestamp":443.2083333333333,"duration":1.5416666666666667},
                {"offset":45954149,"size":25351,"timestamp":1590.5833333333333,"duration":5.583333333333333},
                {"offset":45979500,"size":160,"timestamp":39.879557291666664,"duration":0.5696614583333334},
                {"offset":45979660,"size":449944,"timestamp":444.75,"duration":7},
                {"offset":46429604,"size":113488,"timestamp":1596.1666666666667,"duration":25.083333333333332},
                {"offset":46543092,"size":124,"timestamp":40.44921875,"duration":6.89697265625},
                {"offset":46543216,"size":572435,"timestamp":451.75,"duration":6.541666666666667},
                {"offset":47115651,"size":106126,"timestamp":1621.25,"duration":23.5},
                {"offset":47221777,"size":157,"timestamp":47.34619140625,"duration":0.2611490885416667},
                {"offset":47221934,"size":315368,"timestamp":458.2916666666667,"duration":2.5833333333333335},
                {"offset":47537302,"size":41816,"timestamp":1644.75,"duration":9.25},
                {"offset":47579118,"size":124,"timestamp":47.607340494791664,"duration":0.22379557291666666},
                {"offset":47579242,"size":7093,"timestamp":460.875,"duration":1.0416666666666667},
                {"offset":47586335,"size":17071,"timestamp":1654,"duration":3.75},
                {"offset":47603406,"size":157,"timestamp":47.831136067708336,"duration":0.2610677083333333},
                {"offset":47603563,"size":1011905,"timestamp":461.9166666666667,"duration":9.416666666666666},
                {"offset":48615468,"size":152909,"timestamp":1657.75,"duration":33.833333333333336},
                {"offset":48768377,"size":124,"timestamp":48.092203776041664,"duration":0.3831380208333333},
                {"offset":48768501,"size":54370,"timestamp":471.3333333333333,"duration":1.5416666666666667},
                {"offset":48822871,"size":24938,"timestamp":1691.5833333333333,"duration":5.5},
                {"offset":48847809,"size":155,"timestamp":48.475341796875,"duration":0.064453125},
                {"offset":48847964,"size":743549,"timestamp":472.875,"duration":7.291666666666667},
                {"offset":49591513,"size":118138,"timestamp":1697.0833333333333,"duration":26.166666666666668},
                {"offset":49709651,"size":104578,"timestamp":480.1666666666667,"duration":1.5},
                {"offset":49814229,"size":24592,"timestamp":1723.25,"duration":5.416666666666667},
                {"offset":49838821,"size":86791,"timestamp":481.6666666666667,"duration":2.1666666666666665},
                {"offset":49925612,"size":35084,"timestamp":1728.6666666666667,"duration":7.75},
                {"offset":49960696,"size":162660,"timestamp":483.8333333333333,"duration":2.4583333333333335},
                {"offset":50123356,"size":39935,"timestamp":1736.4166666666667,"duration":8.833333333333334},
                {"offset":50163291,"size":224181,"timestamp":486.2916666666667,"duration":3.875},
                {"offset":50387472,"size":62901,"timestamp":1745.25,"duration":13.916666666666666},
                {"offset":50450373,"size":652407,"timestamp":490.1666666666667,"duration":7.416666666666667},
                {"offset":51102780,"size":120111,"timestamp":1759.1666666666667,"duration":26.583333333333332},
                {"offset":51222891,"size":1085479,"timestamp":497.5833333333333,"duration":10.416666666666666},
                {"offset":52308370,"size":168967,"timestamp":1785.75,"duration":37.416666666666664},
                {"offset":52477337,"size":997741,"timestamp":508,"duration":10.416666666666666},
                {"offset":53475078,"size":168639,"timestamp":1823.1666666666667,"duration":37.333333333333336},
                {"offset":53643717,"size":976721,"timestamp":518.4166666666666,"duration":10.416666666666666},
                {"offset":54620438,"size":168970,"timestamp":1860.5,"duration":37.416666666666664},
                {"offset":54789408,"size":1018561,"timestamp":528.8333333333334,"duration":10.416666666666666},
                {"offset":55807969,"size":168991,"timestamp":1897.9166666666667,"duration":37.416666666666664},
                {"offset":55976960,"size":1004598,"timestamp":539.25,"duration":10.416666666666666},
                {"offset":56981558,"size":168618,"timestamp":1935.3333333333333,"duration":37.333333333333336},
                {"offset":57150176,"size":1015042,"timestamp":549.6666666666666,"duration":10.416666666666666},
                {"offset":58165218,"size":168996,"timestamp":1972.6666666666667,"duration":37.416666666666664},
                {"offset":58334214,"size":988653,"timestamp":560.0833333333334,"duration":10.416666666666666},
                {"offset":59322867,"size":168592,"timestamp":2010.0833333333333,"duration":37.333333333333336},
                {"offset":59491459,"size":814206,"timestamp":570.5,"duration":9.416666666666666},
                {"offset":60305665,"size":152787,"timestamp":2047.4166666666667,"duration":33.833333333333336},
                {"offset":60458452,"size":12497,"timestamp":579.9166666666666,"duration":1},
                {"offset":60470949,"size":16296,"timestamp":2081.25,"duration":3.5833333333333335},
                {"offset":60487245,"size":589151,"timestamp":580.9166666666666,"duration":10.416666666666666},
                {"offset":61076396,"size":168995,"timestamp":2084.8333333333335,"duration":37.416666666666664},
                {"offset":61245391,"size":414307,"timestamp":591.3333333333334,"duration":5.125},
                {"offset":61659698,"size":82947,"timestamp":2122.25,"duration":18.333333333333332}
            ]
        }

    async function fetchSegment(url, segmentManifest) {
        let request = new Request(url);
        request.headers.append("Range", `bytes=${segmentManifest.offset}-${segmentManifest.offset + segmentManifest.size - 1}`);
        const response = await fetch(request);
        return response.arrayBuffer();
    }

    async function loadSegment(sourceBuffer, segment) {
        return new Promise((resolve) => {
            sourceBuffer.addEventListener("updateend", resolve, { once: true });
            sourceBuffer.appendBuffer(segment);
        });
    }

    window.onload = async function() {
        const id = 'log';

        console.time("video");
        video.onloadeddata = () => console.timeEnd("video");

        if (!!!window.ManagedMediaSource)
            return;
        video.disableRemotePlayback = true;
        var source = new ManagedMediaSource();
        await new Promise((resolve) => {
            video.srcObject = source;
            source.addEventListener("sourceopen", resolve, { once: true });
        });
        var sourceBuffer = source.addSourceBuffer(manifest.type);

        const segment = await fetchSegment(manifest.url, manifest.init);
        await loadSegment(sourceBuffer, segment);

        const fetchPromises = manifest.media.map(async (segment, index) => {
            return fetchSegment(manifest.url, segment);
        });
        for (var i = 0; i < fetchPromises.length; i++) {
            await Promise.all(fetchPromises.slice(0, i - 1));
            const data = await fetchPromises[i];
            await loadSegment(sourceBuffer, data);
        }        
        source.endOfStream();
    }
    </script>
<body>
    <h1>MSE with webvtt</h1>
    <div id="videodiv" style="width: 640px; height: 360px">
        <video id="video" style="object-fit: cover;" width="100%" height="100%" autoplay muted playsinline loop controls></video>
    </div>
</body>
</html>
